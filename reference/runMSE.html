<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run a Management Strategy Evaluation — Simulate • MSEtool Functions</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run a Management Strategy Evaluation — Simulate"><meta name="description" content="Functions to run the Management Strategy Evaluation (closed-loop
simulation) for a specified operating model"><meta property="og:description" content="Functions to run the Management Strategy Evaluation (closed-loop
simulation) for a specified operating model"><meta property="og:image" content="https://msetool.openmse.com/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MSEtool Functions</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.7.9999</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Blue-Matter/MSEtool/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Run a Management Strategy Evaluation</h1>
      <small class="dont-index">Source: <a href="https://github.com/Blue-Matter/MSEtool/blob/master/R/runMSE.R" class="external-link"><code>R/runMSE.R</code></a></small>
      <div class="d-none name"><code>runMSE.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Functions to run the Management Strategy Evaluation (closed-loop
simulation) for a specified operating model</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Simulate</span><span class="op">(</span>OM <span class="op">=</span> <span class="fu">MSEtool</span><span class="fu">::</span><span class="va"><a href="OM-class-objects.html">testOM</a></span>, parallel <span class="op">=</span> <span class="cn">FALSE</span>, silent <span class="op">=</span> <span class="cn">FALSE</span>, nsim <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">Project</span><span class="op">(</span></span>
<span>  Hist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  MPs <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  extended <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  checkMPs <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">runMSE</span><span class="op">(</span></span>
<span>  OM <span class="op">=</span> <span class="fu">MSEtool</span><span class="fu">::</span><span class="va"><a href="OM-class-objects.html">testOM</a></span>,</span>
<span>  MPs <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  Hist <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  extended <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  checkMPs <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-om">OM<a class="anchor" aria-label="anchor" href="#arg-om"></a></dt>
<dd><p>An operating model object (class <a href="OM-class.html">OM</a> or class <code>Hist</code>). Also works for
<code>MOM</code> objects, as a wrapper for <code>ProjectMOM</code></p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>Logical or a named list. Should MPs be run using parallel processing?
For <code>runMSE</code>, can also be <code>"sac"</code> to run the entire MSE in parallel
using the split-apply-combine technique. See Details for more information.</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>Should messages be printed out to the console?</p></dd>


<dt id="arg-nsim">nsim<a class="anchor" aria-label="anchor" href="#arg-nsim"></a></dt>
<dd><p>Optional. numeric value to override <code>OM@nsim</code>.</p></dd>


<dt id="arg-hist">Hist<a class="anchor" aria-label="anchor" href="#arg-hist"></a></dt>
<dd><p>Should model stop after historical simulations? Returns an object of
class 'Hist' containing all historical data</p></dd>


<dt id="arg-mps">MPs<a class="anchor" aria-label="anchor" href="#arg-mps"></a></dt>
<dd><p>A vector of methods (character string) of class MP</p></dd>


<dt id="arg-extended">extended<a class="anchor" aria-label="anchor" href="#arg-extended"></a></dt>
<dd><p>Logical. Return extended projection results?
if TRUE, <code>MSE@Misc$extended</code> is a named list with extended data
(including historical and projection by area), extended version of <code>MSE@Hist</code>
is returned, and returns <code>MSE@PPD</code> with StockPars, FleetPars, and ReferencePoints in <code>MSE@PPD</code></p></dd>


<dt id="arg-checkmps">checkMPs<a class="anchor" aria-label="anchor" href="#arg-checkmps"></a></dt>
<dd><p>Logical. Check if the specified MPs exist and can be run on <code>SimulatedData</code>?</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Functions return objects of class <a href="Hist-class.html">Hist</a> or <a href="MSE-class.html">MSE</a></p><ul><li><p>Simulate - An object of class <a href="Hist-class.html">Hist</a></p></li>
<li><p>Project - An object of class <a href="MSE-class.html">MSE</a></p></li>
<li><p>runMSE - An object of class <a href="MSE-class.html">MSE</a> if <code>Hist = TRUE</code> otherwise a class <a href="Hist-class.html">Hist</a> object</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="running-mps-in-parallel">Running MPs in parallel<a class="anchor" aria-label="anchor" href="#running-mps-in-parallel"></a></h3>


<p>For most MPs, running in parallel can actually lead to an increase in computation time, due to the overhead in sending the
information over to the cores. Consequently, by default the MPs will not be run in parallel if <code>parallel=TRUE</code>
(although other internal code will be run in parallel mode).</p>
<p>To run MPs in parallel, specify a named list with the name of the MP(s) assigned as TRUE. For example,<code>parallel=list(AvC=TRUE</code>)
will run the <code>AvC</code> MP in parallel mode.</p>
</div>

<div class="section">
<h3 id="split-apply-combine-mse-in-parallel">Split-apply-combine MSE in parallel<a class="anchor" aria-label="anchor" href="#split-apply-combine-mse-in-parallel"></a></h3>


<p>Additional savings in computation time can be achieved by running the entire simulation in batches. Individual simulations of the operating model
are divided into separate cores using <a href="SubCpars.html">SubCpars</a>, <code>Simulate</code> and <code>Project</code> are applied independently for each core via <code><a href="https://rdrr.io/pkg/snowfall/man/snowfall-c-calculation.html" class="external-link">snowfall::sfClusterApplyLB</a></code>, and the
output (a list of MSE objects) is stitched back together into a single MSE object using <a href="checkMSE.html">joinMSE</a>.</p>
<p>The ideal number of cores will be determined based on the number of simulations and available cores.</p>
<p>There are several issues to look out for when using this split-apply-combine technique:</p>
<ul><li><p>Numerical optimization for depletion may fail in individual cores when <code>OM@cpars$qs</code> is not specified.</p></li>
<li><p>Length bins should be specified in the operating model in <code>OM@cpars$CAL_bins</code>. Otherwise, length bins can vary by core and
create problems when combining into a single object.</p></li>
<li><p>Compared to non-parallel runs, sampled parameters in the operating model will vary despite the same value in <code>OM@seed</code>.</p></li>
<li><p>If there is an error in individual cores or while combining the parallel output into a single Hist or MSE object, the list of output (from the cores) will be returned.</p></li>
</ul></div>

    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>Simulate()</code>: Run the Historical Simulations from an object of class <code>OM</code></p></li>
<li><p><code>Project()</code>: Run the Forward Projections</p></li>
<li><p><code>runMSE()</code>: Run the Historical Simulations and Forward Projections
from an object of class `OM</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adrian Hordyk, Quang Huynh, Tom Carruthers.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

