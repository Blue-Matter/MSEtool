% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/00_Class_length.R
\docType{class}
\name{Length}
\alias{Length}
\alias{Length<-}
\title{Length Object}
\usage{
Length(
  Pars = list(Linf = NA, K = NA, t0 = NA),
  Model = NULL,
  Units = "mm",
  MeanAtAge = NULL,
  CVatAge = 0.1,
  Dist = "normal",
  TruncSD = 2,
  Timing = 0,
  Random = NULL,
  ASK = NULL,
  Classes = NULL,
  Misc = list()
)

Length(x) <- value
}
\arguments{
\item{Pars}{A named list of parameters for a model to generate \code{MeanAtAge} or \code{MeanAtLength}. See \code{Parameters} section in \code{Details}.}

\item{Model}{A character string or a R function. If \code{Pars} corresponds to a built-in model (see \code{\link[=LengthModels]{LengthModels()}}), then \code{Model} can be left blank and will be populated internally.
Alternatively, \code{Model} can be a R function that takes the arguments named in \code{Pars}.}

\item{Units}{A character string describing the units corresponding to \code{MeanAtAge}. Valid values are found in \code{ValidUnits(Length())}. Defaults to \code{mm} if not specified.}

\item{MeanAtAge}{Length-at-Age schedule.  Calculated internally from \code{Pars} and \code{Model}. If populated manually,
\code{Pars} and \code{Model} will be ignored. Should be a 3 dimensional array, with the first dimension either length 1 or
length \code{nSim}, the second dimension length \code{nAge}, and the third dimension either length 1
or length \code{nTS}.}

\item{CVatAge}{Coefficient of variability for the length-at-Age schedule.
Should be a 3 dimensional array, with the first dimension either length 1 or
length \code{nSim}, the second dimension length \code{nAge}, and the third dimension either length 1 or length \code{nTS}.
Alternatively, can be a single numeric value, which applies to all age classes and time steps.}

\item{Dist}{Character. Length 1. Either \code{normal} or \code{lognormal}. Used to generate size composition using \code{MeanAtAge}, \code{SDatAge}, and \code{TruncSD}.}

\item{TruncSD}{The number of standard deviations to truncate the distribution used to create \code{ASK}.
Defaults to 2. Use a large number for a non-truncated distribution.}

\item{Timing}{Numeric value between 0 and 1. The relative time within a time step, where 0
means the beginning of the time step and 1 the end of the time step.
Defaults to 0.}

\item{Random}{An array with dimensions matching \code{MeanAtAge}. \code{MeanAtAge} is assumed to represent
the mean value for each age class in each time step, and is used to calculate the reference points.
\code{Random} is additional variability that is NOT used when calculating reference points.
NOTE: \code{Random} is not currently implemented.}

\item{ASK}{The age-length key. Calculated internally from \code{MeanAtAge} and \code{CVatAge}.
The \code{Classes} slot is populated internally unless specified in the object.}

\item{Classes}{The length classes used for the calculation of the age-size key (\code{ASK}).
Will also be used for calculating at-length schedules, e.g., \code{\link[=Maturity]{Maturity()}} or \code{\link[=Selectivity]{Selectivity()}}.}

\item{Misc}{A list for additional miscellaneous objects. Not currently used.}

\item{x}{A \code{\link[=Stock]{Stock()}} class object}

\item{value}{A \code{length} class object to assign to \code{x}}
}
\description{
The \code{Length} function is used to create S4 class \code{length} objects or to access or
assign \code{length} objects to \code{\link[=Stock]{Stock()}} class objects
}
\details{
\subsection{About the \code{length} Class}{

Objects of class \code{length} contain information relating to the length-at-age
of a stock.
}

\subsection{Creating New Objects}{

New \code{length} objects can be created with \code{Length()}, see \code{Usage} and \code{Examples} for details.
}

\subsection{Accessing and Assigning Slots}{

Like all of the new style objects in \code{MSEtool}, the slots in \code{length} objects can be accessed and assigned with functions matching the slot names. See \verb{See Also} section for functions.
}

\subsection{Parameters (\code{Pars})}{

The \code{Pars} slot is used to store the parameters for the \code{Model} that generates
the mean length-at-age growth curve. The \code{MeanAtAge} slot is populated internally
from \code{Pars} and \code{Model}.

\code{Pars} should be a named list, with the names corresponding to the parameters
for a valid length-at-age model (see \code{\link[=LengthModels]{LengthModels()}}).

The elements in \code{Pars} can be structured several different ways:
\itemize{
\item \strong{Constant value over all simulations and time steps}: Numeric length 1
\item \strong{Uniformly distributed over simulations, constant all time steps}: Numeric length 2,
representing the lower and upper bounds of a uniform distribution.
\item \strong{Log-normally distributed over time steps}: \code{SD} appended to a previously
specified parameter (e.g., \code{LinfSD}) representing the lower and upper bound
of a uniform distribution for the log-normally distributed inter-annual variation.
\item \strong{Non-uniform distribution over simulations}: Numeric vector of length \code{nSim} (must be >2).
\item \strong{Time-varying}: Numeric matrix with either 1 or \code{nSim} rows and \code{nTS} columns,
where \code{nTS} is the total number of time steps. See note below.
}

TODO - this has changed now - use dimnames not attributes
\strong{Note:} For time-varying parameters, if the parameter only varies in particular
time steps (rather than every time step), the number of columns in the matrix
can be equal to the number of change points instead of \code{nTS}. The time step
corresponding with each change point can be specified using \code{attributes}, see \code{Examples}.
}
}
\section{Functions}{
\itemize{
\item \code{Length()}: Create a new \code{length} class object

\item \code{Length(x) <- value}: Assign an \code{length} class object to a \code{\link[=Stock]{Stock()}} object

}}
\section{Slots}{

\describe{
\item{\code{Pars}}{A named list of parameters for a model to generate \code{MeanAtAge} or \code{MeanAtLength}. See \code{Parameters} section in \code{Details}.}

\item{\code{Model}}{A character string or a R function. If \code{Pars} corresponds to a built-in model (see \code{\link[=LengthModels]{LengthModels()}}), then \code{Model} can be left blank and will be populated internally.
Alternatively, \code{Model} can be a R function that takes the arguments named in \code{Pars}.}

\item{\code{Units}}{A character string describing the units corresponding to \code{MeanAtAge}. Valid values are found in \code{ValidUnits(Length())}. Defaults to \code{mm} if not specified.}

\item{\code{MeanAtAge}}{Length-at-Age schedule.  Calculated internally from \code{Pars} and \code{Model}. If populated manually,
\code{Pars} and \code{Model} will be ignored. Should be a 3 dimensional array, with the first dimension either length 1 or
length \code{nSim}, the second dimension length \code{nAge}, and the third dimension either length 1
or length \code{nTS}.}

\item{\code{CVatAge}}{Coefficient of variability for the length-at-Age schedule.
Should be a 3 dimensional array, with the first dimension either length 1 or
length \code{nSim}, the second dimension length \code{nAge}, and the third dimension either length 1 or length \code{nTS}.
Alternatively, can be a single numeric value, which applies to all age classes and time steps.}

\item{\code{Dist}}{Character. Length 1. Either \code{normal} or \code{lognormal}. Used to generate size composition using \code{MeanAtAge}, \code{SDatAge}, and \code{TruncSD}.}

\item{\code{TruncSD}}{The number of standard deviations to truncate the distribution used to create \code{ASK}.
Defaults to 2. Use a large number for a non-truncated distribution.}

\item{\code{Timing}}{Numeric value between 0 and 1. The relative time within a time step, where 0
means the beginning of the time step and 1 the end of the time step.
Defaults to 0.}

\item{\code{Random}}{An array with dimensions matching \code{MeanAtAge}. \code{MeanAtAge} is assumed to represent
the mean value for each age class in each time step, and is used to calculate the reference points.
\code{Random} is additional variability that is NOT used when calculating reference points.
NOTE: \code{Random} is not currently implemented.}

\item{\code{ASK}}{The age-length key. Calculated internally from \code{MeanAtAge} and \code{CVatAge}.
The \code{Classes} slot is populated internally unless specified in the object.}

\item{\code{Classes}}{The length classes used for the calculation of the age-size key (\code{ASK}).
Will also be used for calculating at-length schedules, e.g., \code{\link[=Maturity]{Maturity()}} or \code{\link[=Selectivity]{Selectivity()}}.}

\item{\code{Misc}}{A list for additional miscellaneous objects. Not currently used.}
}}

\examples{
LengthModels()

# von Bertalanffy growth model

## Constant over simulations and time
Length <- Length(Pars=list(Linf=100, K=0.2, t0=-0.1))

# Populate the object (usually done internally; see `?Populate`)
Length <- Populate(Length, Ages(20))
MeanAtAge(Length)

plot(Length)

## Uniform distributed over simulations, constant over time
Length <- Length(Pars=list(Linf=c(90,100),
                             K=c(0.15,0.2),
                             t0=-0.1))

# Log-normally distributed over time with 5\% CV on Linf
Length <- Length(Pars=list(Linf=c(90,100),
                             LinfSD=0.05,
                             K=c(0.15,0.2),
                             t0=-0.1))

# Time-varying parameters
# Linf - uniformly distributed over simulations, normally distributed over time
nTS <- 30
nsim <- 10

Linf_mu <- runif(nsim, 50, 100)
Linf_sd <- 0.1 * Linf_mu

Length <- Length(Pars=list(Linf=matrix(rnorm(nTS,Linf_mu,Linf_sd),
                                       nsim, nTS),
                             K=c(0.15,0.2),
                             t0=-0.1))

# Change points in time-varying parameters
Length <- Length(Pars=list(
  Linf=matrix(rnorm(3, 100, 10),
              nrow=1, ncol=3), # single simulation, 3 time steps
  K=c(0.15,0.2), # uniform distribution
  t0=-0.1) # single value
  )

attributes(Length)$TimeSteps <- c(1980, 2000, 2020)


# Manually specify `MeanAtAge`, constant over sims and time

MeanAtAge <- vonBert(0:20, 100, 0.1, 0)

Length <- Length(MeanAtAge=MeanAtAge)

# Classes & Age-Size Key

Length <- Length(Pars=list(Linf=100, K=0.2, t0=-0.1),
                   Classes=seq(from=2.5, by=2.5, to=130))

plot(Length, Ages=Ages(20), type='ASK')

}
\seealso{
\code{\link[=Pars]{Pars()}}, \code{\link[=Model]{Model()}}, \code{\link[=Units]{Units()}}, \code{\link[=MeanAtAge]{MeanAtAge()}}, \code{\link[=CVatAge]{CVatAge()}}, \code{\link[=Dist]{Dist()}}, \code{\link[=TruncSD]{TruncSD()}}, \code{\link[=Timing]{Timing()}}, \code{\link[=Random]{Random()}}, \code{\link[=ASK]{ASK()}}, \code{\link[=Classes]{Classes()}}, \code{\link[=Misc]{Misc()}}, \code{\link[=ValidUnits]{ValidUnits()}}, \code{\link[=Check]{Check()}}, \code{\link[=LengthModels]{LengthModels()}}, \code{\link[=Populate]{Populate()}}
}
